{"version":3,"file":"main.js","mappings":"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","sources":["webpack://battleship/./src/gameBoard.js","webpack://battleship/./src/gameManager.js","webpack://battleship/./src/player.js","webpack://battleship/./src/ship.js","webpack://battleship/webpack/bootstrap","webpack://battleship/./src/DOMmanager.js"],"sourcesContent":["const Ship = require(\"./ship\");\n\nclass Cell {\n  constructor() {\n    this.ship = null;\n    this.isHit = false;\n  }\n}\n\nclass GameBoard {\n  #board = null;\n  #ships = [];\n  #Allowedships = [\n    new Ship(5),\n    new Ship(4),\n    new Ship(3),\n    new Ship(3),\n    new Ship(2),\n  ];\n  constructor(size) {\n    this.generateBoard(size);\n  }\n\n  placeShip(coordinates, shipLength, isVertical = false) {\n    let { x, y } = coordinates;\n    return new Promise((resolve, reject) => {\n      if (!this.#checkCoordinates(coordinates)) {\n        reject(\"Coordinates out of range\");\n        return;\n      }\n      if (this.#board[x][y].ship !== null) {\n        reject(\"Target coordinates not empty\");\n        return;\n      }\n      if (!this.#checkForSpace(coordinates, shipLength, isVertical)) {\n        reject(\"Not enough space\");\n        return;\n      }\n      let newShip = this.#getShip(shipLength);\n      if (!newShip) {\n        reject(\"No ship found\");\n      }\n      if (!isVertical) {\n        for (let i = 0; i < shipLength; i++) {\n          this.#board[x][y + i].ship = newShip;\n        }\n      } else {\n        for (let i = 0; i < shipLength; i++) {\n          this.#board[x + i][y].ship = newShip;\n        }\n      }\n      resolve(newShip);\n      this.#ships.push(newShip);\n    });\n  }\n\n  #getShip(shipLength) {\n    for (let i = 0; i < this.#Allowedships.length; i++) {\n      if (this.#Allowedships[i].length == shipLength) {\n        return this.#Allowedships.splice(i, 1)[0];\n      }\n    }\n  }\n\n  #checkForSpace(coordinates, shipLength, isVertical) {\n    let { x, y } = coordinates;\n    let canPlaceShip = true;\n    if (!isVertical) {\n      for (let i = 0; i < shipLength; i++) {\n        let coords = { x: x, y: y + i };\n        if (\n          !this.#checkCoordinates(coords) ||\n          this.#board[x][y + i].ship !== null\n        ) {\n          canPlaceShip = false;\n        }\n      }\n    } else {\n      for (let i = 0; i < shipLength; i++) {\n        let coords = { x: x + i, y: y };\n        if (\n          !this.#checkCoordinates(coords) ||\n          this.#board[x + i][y].ship !== null\n        ) {\n          canPlaceShip = false;\n        }\n      }\n    }\n    return canPlaceShip;\n  }\n  getBoard() {\n    return this.#board;\n  }\n  #coordinatesInRange(coordinates) {\n    let { x, y } = coordinates;\n    return !(\n      x < 0 ||\n      y < 0 ||\n      x >= this.#board.length ||\n      y >= this.#board.length\n    );\n  }\n\n  #checkCoordinates(coordinates) {\n    if (!(\"x\" in coordinates) || !(\"y\" in coordinates)) {\n      return false;\n    }\n    if (isNaN(coordinates.x) || isNaN(coordinates.y)) {\n      return false;\n    }\n    if (!this.#coordinatesInRange(coordinates)) {\n      return false;\n    }\n    return true;\n  }\n\n  receiveAttack(coordinates) {\n    let { x, y } = coordinates;\n    if (!this.#checkCoordinates(coordinates)) {\n      return;\n    }\n    if (this.#board[x][y].isHit == true) {\n      return { success: false, shipHit: false, error: \"Cell already hit\" };\n    }\n    this.#board[x][y].isHit = true;\n\n    if (this.#board[x][y].ship == null) {\n      return { success: true, shipHit: false, error: null };\n    }\n\n    this.#board[x][y].ship.hit();\n    return { success: true, shipHit: true, error: null };\n  }\n\n  allShipsAreSunk() {\n    let allAreSunk = true;\n    for (let i = 0; i < this.#ships.length; i++) {\n      if (!this.#ships[i].isSunk()) {\n        allAreSunk = false;\n      }\n    }\n    return allAreSunk;\n  }\n  allShipsPlaced() {\n    return this.#Allowedships.length == 0;\n  }\n  getCell(coordinates) {\n    return this.#board[coordinates.x][coordinates.y];\n  }\n\n  generateBoard(size) {\n    this.#board = new Array(size)\n      .fill(\"\")\n      .map((_) => new Array(size).fill(\"\").map((_) => new Cell()));\n  }\n}\n\nmodule.exports = GameBoard;\n","const GameBoard = require(\"./gameBoard\");\nconst Player = require(\"./player\");\n\nclass GameManager {\n  #gameStarted = false;\n  #playerTurn = true;\n  #playerBoard = null;\n  #otherBoard = null;\n\n  constructor() {\n    this.player = null;\n    this.otherPlayer = null;\n  }\n\n  get gameStarted() {\n    return this.#gameStarted;\n  }\n\n  newGame(boardSize, players, playerCoords) {\n    return new Promise((resolve, reject) => {\n      if (!boardSize || !players || boardSize <= 0) {\n        reject(\"Incorrect game info\");\n      }\n\n      this.player = new Player(players[0].name, players[0].isComputer);\n      this.otherPlayer = new Player(players[1].name, players[1].isComputer);\n      this.#playerBoard = new GameBoard(boardSize);\n      this.#otherBoard = new GameBoard(boardSize);\n\n      for (let i = 0; i < playerCoords.length; i++) {\n        this.#playerBoard\n          .placeShip(playerCoords[i].coords, playerCoords[i].length)\n          .catch((error) => {\n            console.log(error);\n          });\n      }\n      if (!this.#playerBoard.allShipsPlaced()) {\n        reject(\"Wrong ship coordinates\");\n      }\n      this.#otherBoard.placeShip({ x: 0, y: 0 }, 5);\n      this.#otherBoard.placeShip({ x: 1, y: 0 }, 4);\n      this.#otherBoard.placeShip({ x: 2, y: 0 }, 3);\n      this.#otherBoard.placeShip({ x: 3, y: 0 }, 3);\n      this.#otherBoard.placeShip({ x: 4, y: 0 }, 2);\n      resolve(\"Game initiated\");\n    });\n  }\n\n  startGame() {\n    if (this.#gameStarted) {\n      return;\n    }\n    if (!this.#playerBoard || !this.#otherBoard) {\n      return false;\n    }\n    return (this.#gameStarted =\n      this.#playerBoard.allShipsPlaced() && this.#otherBoard.allShipsPlaced());\n  }\n\n  playTurn(coordinates) {\n    if (!this.#gameStarted) {\n      return;\n    }\n    if (this.#playerTurn) {\n      let result = this.#otherBoard.receiveAttack(coordinates);\n      if (!result.error) {\n        this.#playerTurn = false;\n      }\n      return result;\n    } else {\n      let result = this.#playerBoard.receiveAttack(coordinates);\n      if (!result.error) {\n        this.#playerTurn = true;\n      }\n      return result;\n    }\n  }\n\n  getPlayerBoard() {\n    return this.#getBoardInfo(this.#playerBoard.getBoard());\n  }\n\n  getOtherBoard() {\n    return this.#getBoardInfo(this.#otherBoard.getBoard());\n  }\n\n  checkForWinner() {\n    if (this.#playerBoard.allShipsAreSunk()) {\n      return this.otherPlayer;\n    }\n    if (this.#otherBoard.allShipsAreSunk()) {\n      return this.player;\n    }\n  }\n\n  #getBoardInfo(targetBoard) {\n    let board = new Array(10).fill(\"\").map((_) => new Array(10).fill(\"\"));\n    for (let i = 0; i < targetBoard.length; i++) {\n      for (let j = 0; j < targetBoard[i].length; j++) {\n        let content = \"empty\";\n        let cell = targetBoard[i][j];\n        if (!cell.isHit && cell.ship == null) {\n          content = \"empty\";\n        }\n        if (cell.isHit && cell.ship == null) {\n          content = \"miss\";\n        }\n        if (cell.isHit && cell.ship != null) {\n          content = \"hit\";\n        }\n        if (!cell.isHit && cell.ship != null) {\n          content = \"ship\";\n        }\n        board[i][j] = content;\n      }\n    }\n    return board;\n  }\n}\nmodule.exports = GameManager;\n","class Player {\n  constructor(name = \"player\", isComputer = false) {\n    this.name = name;\n    this.isComputer = isComputer;\n  }\n}\nmodule.exports = Player;\n","class Ship {\n  #hits = 0;\n  constructor(length) {\n    this.length = this.#setLength(length);\n  }\n\n  hit() {\n    if (!this.isSunk()) this.#hits++;\n  }\n\n  isSunk() {\n    return this.#hits >= this.length;\n  }\n\n  get hits() {\n    return this.#hits;\n  }\n\n  #setLength(length) {\n    if (isNaN(length)) {\n      return 1;\n    }\n    let shipLength = Math.floor(Math.abs(length));\n    if (shipLength == 0) {\n      return 1;\n    }\n    return shipLength;\n  }\n}\n\nmodule.exports = Ship;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const GameManager = require(\"./gameManager.js\");\nconst boardsContainer = document.querySelector(\".boards-container\");\nconst formButton = document.querySelector(\".player-info > button\");\nconst playerNameInput = document.querySelector(\".player-info > #player-name\");\nconst otherNameInput = document.querySelector(\".player-info > #other-name\");\nconst info = document.querySelector(\"body > h3\");\nconst ship5Input = document.querySelector(\"#ship-5\");\nconst ship4Input = document.querySelector(\"#ship-4\");\nconst ship3Input = document.querySelector(\"#ship-3\");\nconst ship3Input2 = document.querySelector(\"#ship-3-2\");\nconst ship2Input = document.querySelector(\"#ship-2\");\nlet gameManager = null;\nlet playerBoardDOM = null;\nlet otherPlayerBoardDOM = null;\nformButton.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n  let playerName = playerNameInput.value;\n  let otherName = otherNameInput.value;\n  if (!playerName) {\n    playerNameInput.reportValidity();\n    return;\n  }\n  if (!otherName) {\n    otherNameInput.reportValidity();\n    return;\n  }\n  let players = [\n    { name: playerName, isComputer: false },\n    { name: otherName, isComputer: true },\n  ];\n  newGame(players);\n});\ndocument.addEventListener(\"click\", (event) => {\n  if (event.target.parentNode.id == \"other\") {\n    let coords = event.target.getAttribute(\"data-coordinates\").split(\":\");\n    playTurn(coords);\n  }\n});\n\nasync function newGame(players) {\n  gameManager = new GameManager();\n  boardsContainer.innerHTML = \"\";\n  let result = await gameManager\n    .newGame(10, players, getCoordinatesInput())\n    .catch((error) => {\n      console.log(error);\n      window.alert(\"Wrong coordinates\");\n    });\n  if (result != \"Game initiated\") {\n    return;\n  }\n  gameManager.startGame();\n\n  playerBoardDOM = createBoardDOM(10, \"player\");\n  otherPlayerBoardDOM = createBoardDOM(10, \"other\");\n\n  updateBoardDom(gameManager.getPlayerBoard(), playerBoardDOM, true);\n  updateBoardDom(gameManager.getOtherBoard(), otherPlayerBoardDOM);\n}\n\nfunction createBoardDOM(size, id) {\n  let boardDOM = new Array(size).fill(\"\").map((_) => new Array(size).fill(\"\"));\n\n  let board = document.createElement(\"div\");\n  board.id = id;\n  board.classList.add(\"board\");\n  let cells = [];\n  for (let i = 0; i < size; i++) {\n    let row = [];\n    for (let j = 0; j < size; j++) {\n      let cell = document.createElement(\"div\");\n      cell.classList.add(\"cell\");\n      cell.setAttribute(\"data-coordinates\", `${i}:${j}`);\n      boardDOM[i][j] = cell;\n      row.push(cell);\n    }\n    cells.push(row);\n  }\n  cells.reverse();\n  cells = formatArray(cells);\n  board.append(...cells);\n  boardsContainer.appendChild(board);\n  return boardDOM;\n}\n\nfunction playTurn(coords) {\n  let result = gameManager.playTurn({ x: coords[0], y: coords[1] });\n  if (result.error) {\n    return;\n  }\n\n  gameManager.playTurn(getComputerCoordinates());\n  updateBoardDom(gameManager.getOtherBoard(), otherPlayerBoardDOM);\n  updateBoardDom(gameManager.getPlayerBoard(), playerBoardDOM, true);\n  let winner = gameManager.checkForWinner();\n  if (winner) {\n    info.innerText = `🎉 Winner is ${winner.name}`;\n  }\n}\n\nlet computerCoords = [];\nfunction getComputerCoordinates() {\n  let coordinates = generateCoordinates();\n  while (checkCoordinates(coordinates)) {\n    coordinates = generateCoordinates();\n  }\n  computerCoords.push(coordinates);\n  return coordinates;\n}\n\nfunction checkCoordinates(coords) {\n  let included = false;\n  for (let coordinates of computerCoords) {\n    if (coordinates.x == coords.x && coordinates.y == coords.y) {\n      included = true;\n    }\n  }\n  return included;\n}\n\nfunction generateCoordinates() {\n  let x = Math.floor(Math.random() * 10);\n  let y = Math.floor(Math.random() * 10);\n  return { x, y };\n}\n\nfunction formatArray(array) {\n  let result = [];\n  for (let i = 0; i < array.length; i++) {\n    result.push(...array[i]);\n  }\n  return result;\n}\n\nfunction getCoordinatesInput() {\n  let coordinates = [];\n  let ship5 = ship5Input.value.split(\"-\");\n  coordinates.push({ length: 5, coords: { x: +ship5[1], y: +ship5[0] } });\n  let ship4 = ship4Input.value.split(\"-\");\n  coordinates.push({ length: 4, coords: { x: +ship4[1], y: +ship4[0] } });\n  let ship3 = ship3Input.value.split(\"-\");\n  coordinates.push({ length: 3, coords: { x: +ship3[1], y: +ship3[0] } });\n  let ship3_2 = ship3Input2.value.split(\"-\");\n  coordinates.push({ length: 3, coords: { x: +ship3_2[1], y: +ship3_2[0] } });\n  let ship2 = ship2Input.value.split(\"-\");\n  coordinates.push({ length: 2, coords: { x: +ship2[1], y: +ship2[0] } });\n  return coordinates;\n}\n\nfunction updateBoardDom(board, boardDOM, displayships = false) {\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board[i].length; j++) {\n      let content = board[i][j];\n      if (content == \"ship\" && displayships) {\n        boardDOM[i][j].classList.add(\"ship\");\n        boardDOM[i][j].setAttribute(\"draggable\", true);\n      }\n      if (content == \"hit\") {\n        boardDOM[i][j].classList.add(\"hit\");\n      }\n      if (content == \"miss\") {\n        boardDOM[i][j].classList.add(\"miss\");\n      }\n    }\n  }\n}\n"],"names":["Ship","Cell","constructor","this","ship","isHit","module","exports","size","generateBoard","placeShip","coordinates","shipLength","isVertical","x","y","Promise","resolve","reject","newShip","i","push","length","splice","canPlaceShip","coords","getBoard","isNaN","receiveAttack","success","shipHit","error","hit","allShipsAreSunk","allAreSunk","isSunk","allShipsPlaced","getCell","Array","fill","map","_","GameBoard","Player","player","otherPlayer","gameStarted","newGame","boardSize","players","playerCoords","name","isComputer","catch","console","log","startGame","playTurn","result","getPlayerBoard","getOtherBoard","checkForWinner","targetBoard","board","j","content","cell","hits","Math","floor","abs","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","GameManager","boardsContainer","document","querySelector","formButton","playerNameInput","otherNameInput","info","ship5Input","ship4Input","ship3Input","ship3Input2","ship2Input","gameManager","playerBoardDOM","otherPlayerBoardDOM","createBoardDOM","id","boardDOM","createElement","classList","add","cells","row","setAttribute","reverse","array","formatArray","append","appendChild","addEventListener","event","preventDefault","playerName","value","otherName","async","innerHTML","ship5","split","ship4","ship3","ship3_2","ship2","getCoordinatesInput","window","alert","updateBoardDom","reportValidity","target","parentNode","generateCoordinates","checkCoordinates","computerCoords","getComputerCoordinates","winner","innerText","getAttribute","included","random","displayships"],"sourceRoot":""}