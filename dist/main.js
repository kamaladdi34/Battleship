(()=>{var e={427:(e,t,r)=>{const i=r(643);class s{constructor(){this.ship=null,this.isHit=!1}}e.exports=class{#e=null;#t=[];#r=[new i(5),new i(4),new i(3),new i(3),new i(2)];constructor(e){this.generateBoard(e)}placeShip(e,t,r=!1){let{x:i,y:s}=e;return new Promise(((a,o)=>{if(!this.#i(e))return void o("Coordinates out of range");if(null!==this.#e[i][s].ship)return void o("Target coordinates not empty");if(!this.#s(e,t,r))return void o("Not enough space");let l=this.#a(t);if(l||o("No ship found"),r)for(let e=0;e<t;e++)this.#e[i+e][s].ship=l;else for(let e=0;e<t;e++)this.#e[i][s+e].ship=l;a(l),this.#t.push(l)}))}#a(e){for(let t=0;t<this.#r.length;t++)if(this.#r[t].length==e)return this.#r.splice(t,1)[0]}#s(e,t,r){let{x:i,y:s}=e,a=!0;if(r)for(let e=0;e<t;e++){let t={x:i+e,y:s};this.#i(t)&&null===this.#e[i+e][s].ship||(a=!1)}else for(let e=0;e<t;e++){let t={x:i,y:s+e};this.#i(t)&&null===this.#e[i][s+e].ship||(a=!1)}return a}getBoard(){return this.#e}#o(e){let{x:t,y:r}=e;return!(t<0||r<0||t>=this.#e.length||r>=this.#e.length)}#i(e){return"x"in e&&"y"in e&&!isNaN(e.x)&&!isNaN(e.y)&&!!this.#o(e)}receiveAttack(e){let{x:t,y:r}=e;if(this.#i(e))return 1==this.#e[t][r].isHit?{success:!1,shipHit:!1,error:"Cell already hit"}:(this.#e[t][r].isHit=!0,null==this.#e[t][r].ship?{success:!0,shipHit:!1,error:null}:(this.#e[t][r].ship.hit(),{success:!0,shipHit:!0,error:null}))}allShipsAreSunk(){let e=!0;for(let t=0;t<this.#t.length;t++)this.#t[t].isSunk()||(e=!1);return e}allShipsPlaced(){return 0==this.#r.length}getCell(e){return this.#e[e.x][e.y]}generateBoard(e){this.#e=new Array(e).fill("").map((t=>new Array(e).fill("").map((e=>new s))))}}},682:(e,t,r)=>{const i=r(427),s=r(507);e.exports=class{#l=!1;#n=!0;#h=null;#d=null;constructor(){this.player=null,this.otherPlayer=null}get gameStarted(){return this.#l}newGame(e,t){return new Promise(((r,a)=>{(!e||!t||e<=0)&&a("Incorrect game info"),this.player=new s(t[0].name,t[0].isComputer),this.otherPlayer=new s(t[1].name,t[1].isComputer),this.#h=new i(e),this.#d=new i(e),this.#h.placeShip({x:0,y:3},5),this.#h.placeShip({x:1,y:3},4),this.#h.placeShip({x:2,y:2},3),this.#h.placeShip({x:3,y:5},3),this.#h.placeShip({x:4,y:0},2,!0),this.#d.placeShip({x:0,y:0},5),this.#d.placeShip({x:1,y:0},4),this.#d.placeShip({x:2,y:0},3),this.#d.placeShip({x:3,y:0},3),this.#d.placeShip({x:4,y:0},2),r("Game initiated")}))}startGame(){if(!this.#l)return!(!this.#h||!this.#d)&&(this.#l=this.#h.allShipsPlaced()&&this.#d.allShipsPlaced())}playTurn(e){if(this.#l){if(this.#n){let t=this.#d.receiveAttack(e);return t.error||(this.#n=!1),t}{let t=this.#h.receiveAttack(e);return t.error||(this.#n=!0),t}}}getPlayerBoard(){return this.#p(this.#h.getBoard())}getOtherBoard(){return this.#p(this.#d.getBoard())}checkForWinner(){return this.#h.allShipsAreSunk()?this.otherPlayer:this.#d.allShipsAreSunk()?this.player:void 0}#p(e){let t=new Array(10).fill("").map((e=>new Array(10).fill("")));for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++){let s="empty",a=e[r][i];a.isHit||null!=a.ship||(s="empty"),a.isHit&&null==a.ship&&(s="miss"),a.isHit&&null!=a.ship&&(s="hit"),a.isHit||null==a.ship||(s="ship"),t[r][i]=s}return t}}},507:e=>{e.exports=class{constructor(e="player",t=!1){this.name=e,this.isComputer=t}}},643:e=>{e.exports=class{#u=0;constructor(e){this.length=this.#c(e)}hit(){this.isSunk()||this.#u++}isSunk(){return this.#u>=this.length}get hits(){return this.#u}#c(e){if(isNaN(e))return 1;let t=Math.floor(Math.abs(e));return 0==t?1:t}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}(()=>{const e=r(682),t=document.querySelector(".boards-container"),i=document.querySelector(".player-info > button"),s=document.querySelector(".player-info > #player-name"),a=document.querySelector(".player-info > #other-name"),o=document.querySelector("body > h3");let l=null,n=null,h=null;function d(e,r){let i=new Array(e).fill("").map((t=>new Array(e).fill(""))),s=document.createElement("div");s.id=r,s.classList.add("board");let a=[];for(let t=0;t<e;t++){let r=[];for(let s=0;s<e;s++){let e=document.createElement("div");e.classList.add("cell"),e.setAttribute("data-coordinates",`${t}:${s}`),i[t][s]=e,r.push(e)}a.push(r)}return a.reverse(),a=function(e){let t=[];for(let r=0;r<e.length;r++)t.push(...e[r]);return t}(a),s.append(...a),t.appendChild(s),i}i.addEventListener("click",(r=>{r.preventDefault();let i=s.value,o=a.value;if(!i)return s.reportValidity(),void console.log("wo");var p;o?(p=[{name:i,isComputer:!1},{name:o,isComputer:!0}],l=new e,t.innerHTML="",l.newGame(10,p),l.startGame(),n=d(10,"player"),h=d(10,"other"),y(l.getPlayerBoard(),n,!0),y(l.getOtherBoard(),h)):a.reportValidity()})),document.addEventListener("click",(e=>{"other"==e.target.parentNode.id&&function(e){if(l.playTurn({x:e[0],y:e[1]}).error)return;l.playTurn(function(){let e=c();for(;u(e);)e=c();return p.push(e),e}()),y(l.getOtherBoard(),h),y(l.getPlayerBoard(),n,!0);let t=l.checkForWinner();t&&(console.log(t),o.innerText=`ðŸŽ‰ Winner is ${t.name}`)}(e.target.getAttribute("data-coordinates").split(":"))}));let p=[];function u(e){let t=!1;for(let r of p)r.x==e.x&&r.y==e.y&&(t=!0);return t}function c(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}}function y(e,t,r=!1){for(let i=0;i<e.length;i++)for(let s=0;s<e[i].length;s++){let a=e[i][s];"ship"==a&&r&&t[i][s].classList.add("ship"),"hit"==a&&t[i][s].classList.add("hit"),"miss"==a&&t[i][s].classList.add("miss")}}})()})();
//# sourceMappingURL=main.js.map