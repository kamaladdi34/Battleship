(()=>{var t={427:(t,e,r)=>{const i=r(643);class s{constructor(){this.ship=null,this.isHit=!1}}t.exports=class{#t=null;#e=[];#r=[new i(5),new i(4),new i(3),new i(3),new i(2)];constructor(t){this.generateBoard(t)}placeShip(t,e,r=!1){let{x:i,y:s}=t;return new Promise(((a,h)=>{if(!this.#i(t))return void h("Coordinates out of range");if(null!==this.#t[i][s].ship)return void h("Target coordinates not empty");if(!this.#s(t,e,r))return void h("Not enough space");let l=this.#a(e);if(l||h("No ship found"),r)for(let t=0;t<e;t++)this.#t[i+t][s].ship=l;else for(let t=0;t<e;t++)this.#t[i][s+t].ship=l;a(l),this.#e.push(l)}))}#a(t){for(let e=0;e<this.#r.length;e++)if(this.#r[e].length==t)return this.#r.splice(e,1)[0]}#s(t,e,r){let{x:i,y:s}=t,a=!0;if(r)for(let t=0;t<e;t++){let e={x:i+t,y:s};this.#i(e)&&null===this.#t[i+t][s].ship||(a=!1)}else for(let t=0;t<e;t++){let e={x:i,y:s+t};this.#i(e)&&null===this.#t[i][s+t].ship||(a=!1)}return a}getBoard(){return this.#t}#h(t){let{x:e,y:r}=t;return!(e<0||r<0||e>=this.#t.length||r>=this.#t.length)}#i(t){return"x"in t&&"y"in t&&!isNaN(t.x)&&!isNaN(t.y)&&!!this.#h(t)}receiveAttack(t){let{x:e,y:r}=t;if(this.#i(t))return 1==this.#t[e][r].isHit?{success:!1,shipHit:!1,error:"Cell already hit"}:(this.#t[e][r].isHit=!0,null==this.#t[e][r].ship?{success:!0,shipHit:!1,error:null}:(this.#t[e][r].ship.hit(),{success:!0,shipHit:!0,error:null}))}allShipsAreSunk(){let t=!0;for(let e=0;e<this.#e.length;e++)this.#e[e].isSunk()||(t=!1);return t}allShipsPlaced(){return 0==this.#r.length}getCell(t){return this.#t[t.x][t.y]}generateBoard(t){this.#t=new Array(t).fill("").map((e=>new Array(t).fill("").map((t=>new s))))}}},682:(t,e,r)=>{const i=r(427),s=r(507);t.exports=class{#l=!1;#o=!0;#n=null;#p=null;constructor(){this.player=null,this.otherPlayer=null}get gameStarted(){return this.#l}newGame(t,e){return new Promise(((r,a)=>{(!t||!e||t<=0)&&a("Incorrect game info"),this.player=new s(e[0].name,e[0].isComputer),this.otherPlayer=new s(e[1].name,e[1].isComputer),this.#n=new i(t),this.#p=new i(t),this.#n.placeShip({x:0,y:3},5),this.#n.placeShip({x:1,y:3},4),this.#n.placeShip({x:2,y:2},3),this.#n.placeShip({x:3,y:5},3),this.#n.placeShip({x:4,y:0},2,!0),this.#p.placeShip({x:0,y:0},5),this.#p.placeShip({x:1,y:0},4),this.#p.placeShip({x:2,y:0},3),this.#p.placeShip({x:3,y:0},3),this.#p.placeShip({x:4,y:0},2),r("Game initiated")}))}startGame(){if(!this.#l)return!(!this.#n||!this.#p)&&(this.#l=this.#n.allShipsPlaced()&&this.#p.allShipsPlaced())}playTurn(t){if(this.#l)return this.#o?(this.#o=!1,this.#p.receiveAttack(t)):(this.#o=!0,this.#n.receiveAttack(t))}getPlayerBoard(){return this.#d(this.#n.getBoard())}getOtherBoard(){return this.#d(this.#p.getBoard())}#d(t){let e=new Array(10).fill("").map((t=>new Array(10).fill("")));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++){let s="empty",a=t[r][i];a.isHit||null!=a.ship||(s="empty"),a.isHit&&null==a.ship&&(s="miss"),a.isHit&&null!=a.ship&&(s="hit"),a.isHit||null==a.ship||(s="ship"),e[r][i]=s}return e}}},507:t=>{t.exports=class{constructor(t="player",e=!1){this.name=t,this.isComputer=e}}},643:t=>{t.exports=class{#c=0;constructor(t){this.length=this.#u(t)}hit(){this.isSunk()||this.#c++}isSunk(){return this.#c>=this.length}get hits(){return this.#c}#u(t){if(isNaN(t))return 1;let e=Math.floor(Math.abs(t));return 0==e?1:e}}}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}(()=>{const t=r(682),e=document.querySelector(".boards-container"),i=new t;document.addEventListener("click",(t=>{if("other"==t.target.parentNode.id){let e=t.target.getAttribute("data-coordinates").split(":");i.playTurn({x:e[0],y:e[1]}),l(i.getOtherBoard(),a),l(i.getPlayerBoard(),s,!0)}})),i.newGame(10,[{name:"player one",isComputer:!1},{name:"player two",isComputer:!1}]),i.startGame();let s=h(10,"player"),a=h(10,"other");function h(t,r){let i=new Array(t).fill("").map((e=>new Array(t).fill(""))),s=document.createElement("div");s.id=r,s.classList.add("board");let a=[];for(let e=0;e<t;e++){let r=[];for(let s=0;s<t;s++){let t=document.createElement("div");t.classList.add("cell"),t.setAttribute("data-coordinates",`${e}:${s}`),i[e][s]=t,r.push(t)}a.push(r)}return a.reverse(),a=function(t){let e=[];for(let r=0;r<t.length;r++)e.push(...t[r]);return e}(a),s.append(...a),e.appendChild(s),i}function l(t,e,r=!1){for(let i=0;i<t.length;i++)for(let s=0;s<t[i].length;s++){let a=t[i][s];"ship"==a&&r&&e[i][s].classList.add("ship"),"hit"==a&&e[i][s].classList.add("hit"),"miss"==a&&e[i][s].classList.add("miss")}}l(i.getPlayerBoard(),s,!0),l(i.getOtherBoard(),a)})()})();
//# sourceMappingURL=main.js.map